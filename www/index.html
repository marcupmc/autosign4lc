<!-- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

                                 
                       
<!--              /Nd:             				                                      ________________                                                -->
<!--            :dMMMMh-           				                                     |                                                                -->
<!--          :dMMMMMMMMd:         					                                 |                                                                -->
<!--        +mMMMMMMMMMMMMm+`      				                                     |                     ***                                        -->
<!--     `oNMMMMMMMMMMMMMMMMMy`    				                                     |                     ***                                        -->
<!--    `mMMMMMMMMMMMMMMMMMMMMN.   				    _____________   _____________    |                              __________         _              -->
<!--    +MMMMMMMMMMMMMMMMMMMMMMo  | 			|   	 |         |			 |   |_______________       |      |                  | \       |     -->
<!--    /MMMMMMMMMMMMMMMMMMMMMMo  |             |        |         |             |                   |      |      |          		  |  \      |     -->
<!--     dMMMMMMMMMMMMMMMMMMMMh   |             |        |         |             |                   |      |      |                  |   \     |     -->
<!--      +mMMMMMMMMMMMMMMMMd/    |             |        |         |             |                   |      |      |       ______     |    \    |     -->
<!--        .:+++/NMMM/://-`      |             |        |         |             |                   |      |      |             |    |     \   |     -->
<!--             yMMMMd`          |             |        |         |             |                   |      |      |             |    |      \  |     -->
<!--            /yyyyyyo`         |_____________|        |         |_____________|   ________________|      |      |_____________|    |       \_|     -->
 
<!-- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
<!--  CapGemini ECM3 - AutoSign --> 


<!------------------------------------------------->
<!-- CapGemini ECM3 - AutoSign                   -->
<!------------------------------------------------->
<html>
<head>     

<!-- META -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- STYLE CSS -->
<link rel="stylesheet" href="css/index.css">
<!-- <link href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" -->
<!-- 	rel="stylesheet" type="text/css" /> -->
	
<!-- 	SCRIPTS JS -->
<!-- <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> -->
<!-- <script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script> -->
<!-- <script type="text/javascript" charset="utf-8" src="cordova-2.7.0.js"></script> -->

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>

<!-- <script src="jquery/mobile/jquery.mobile-1.1.0.min.js"></script> -->
<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>

<script src="js/index.js"></script>
<script type="text/javascript">  
	/** Called when phonegap javascript is loaded */
	 
	function onDeviceReady() {
		console.log("#####################################");
		// Check if geolocation is available
		if(window.localStorage.getItem("longitude")==-1&&window.localStorage.getItem("latitude")==-1)
			navigator.geolocation.getCurrentPosition(onGPSSuccess, onGPSError, { maximumAge: 3000, timeout: 80000, enableHighAccuracy: true }); 
		
		$("#connexionForm").append("<input type=\"hidden\" name=\"longitude\" id=\"longitude\" value=\""+window.localStorage.getItem("longitude")+"\"/>");
		$("#connexionForm").append("<input type=\"hidden\" name=\"latitude\" id=\"latitude\" value=\""+window.localStorage.getItem("latitude")+"\"/>");
	}
  
	/** Called when browser load this page*/
	function init() { 
 
		document.addEventListener("deviceready", onDeviceReady, false);
	}
	 
	
	function onGPSSuccess(position) {
		console.log("-------------Success-------------");
		alert("GPS OK lat : "+position.coords.latitude+" long : "+position.coords.longitude);
		window.localStorage.setItem("longitude",position.coords.longitude);
		window.localStorage.setItem("latitude",position.coords.latitude);
		 
	} 
	// onError Callback receives a PositionError object
	//
	function onGPSError(error) {
		console.log("-------------Error-------------");
	    alert('code: '    + error.code    + '\n' +
	            'message: ' + error.message + '\n');
	} 
	
</script> 

<title>Auto Sign</title>
</head>
 
<body onLoad="init()">
	<div data-role="page" id="page-home">
		<div data-role="content">

			<!-- 		Formulaire de connexion -->
			<div id="formulaire">
				<img src="img/Logo_AutoSign4.png"
					style="width: 253px; height: 80px;" class="img-rounded">
				<h2>Bienvenue dans AutoSign</h2>
				<form id="connexionForm">
					<label for="login">Identifiant : </label> <input type="text"
						name="login" id="login" value=""> <label for="password">Mot
						de passe : </label> <input type="password" name="password" id="password"
						value="">
					<button data-role="button" value="Connexion" data-theme="b"
						type="submit">Connexion</button>
				</form>
				<!-- 				FIN -->

				<!-- 				Bouton parametrage de l'ip du serveur -->
				<a href="#popupLogin" data-rel="popup" data-position-to="window"
					data-inline="true" data-theme="c" data-transition="pop"
					data-role="button" data-icon="gear" data-iconpos="notext">Ip du
					Serveur</a>
				<!-- FIN -->

				<!-- 				Formulaire de paramètrage de l'ip du serveur -->
				<div data-role="popup" id="popupMenu" data-theme="c">
					<div data-role="popup" id="popupLogin" data-theme="c"
						class="ui-corner-all">
						<a href="#" data-rel="back" data-role="button" data-theme="a"
							data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
						<div style="padding: 10px 20px;">
							<h3>Entrer ici l'ip du serveur</h3>
							<input type="text" id="ipadress" />
							<button id="saveIp" onclick="saveIp()">Enregistrer</button>
						</div>
					</div>
				</div>
				<!-- 				FIN -->
 
			</div>

		</div>
	</div>
</body>
</html>